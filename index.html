<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Licencias Premium | Tienda Oficial</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.paypal.com/sdk/js?client-id=AZNan-XzPuLF191NkblIdc3scFu1ctT2fzwqz5D7NPB_CtDHFcvOV2IMwxG6FUG2IzrSPVGEM86VaJBG&currency=EUR"></script>
    <style>
        :root {
            --primary: #4a6fc9;
            --secondary: #3a5ab4;
            --accent: #f39c12;
            --light: #f8f9fa;
            --dark: #2c3e50;
            --success: #27ae60;
            --discord: #5865F2;
            --shadow: 0 8px 30px rgba(18, 38, 75, 0.08);
            --glass: rgba(255,255,255,0.07);
            --transition: all 0.35s cubic-bezier(.2,.9,.2,1);
        }

        /* Reduced motion respect */
        @media (prefers-reduced-motion: reduce) {
            * { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; }
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(180deg,#f6f8fc 0%, #ffffff 100%);
            color: #222;
            line-height: 1.6;
            -webkit-font-smoothing:antialiased;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1rem 5%;
            position: sticky; top: 0; z-index: 1200;
            box-shadow: 0 6px 18px rgba(42, 67, 123, 0.12);
            transition: var(--transition);
            transform-origin: top center;
        }

        header.shrink { padding: 0.5rem 5%; transform: translateY(-2px); box-shadow: 0 10px 30px rgba(28,46,92,0.18); }

        .header-container { max-width:1200px; margin:0 auto; display:flex; align-items:center; justify-content:space-between; gap:1rem; }
        .logo { display:flex; align-items:center; gap:.6rem; font-weight:700; font-size:1.4rem; }
        .logo i { color: var(--accent); font-size:1.4rem }
        nav ul { display:flex; gap:1.4rem; list-style:none; }
        nav a { color: white; text-decoration:none; font-weight:600; padding: .3rem .6rem; border-radius:6px; transition: var(--transition); }
        nav a:hover { background: rgba(255,255,255,0.08); transform: translateY(-2px); }

        /* Hero with subtle parallax */
        .hero {
            position:relative; overflow:hidden;
            min-height: 58vh; display:flex; align-items:center; justify-content:center; text-align:center;
            padding: 4rem 5%;
            color: white;
            background: linear-gradient(rgba(58,90,180,0.85), rgba(58,90,180,0.75)), url('https://images.unsplash.com/photo-1555066931-4365d14bab8c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80') center/cover no-repeat;
        }

        .hero::after {
            content: ""; position:absolute; inset:0; background: linear-gradient(180deg, rgba(0,0,0,0.08), rgba(0,0,0,0.12)); pointer-events:none;
        }

        .hero-content { max-width:860px; position:relative; z-index:2; }
        .hero h1 { font-size:3rem; margin-bottom:.8rem; text-shadow:0 6px 30px rgba(34,34,34,0.4); letter-spacing: -0.5px; }
        .hero p { font-size:1.15rem; opacity:.95; margin-bottom:1.4rem; }

        .cta-button { background: linear-gradient(90deg,var(--accent), #e67e22); color:white; padding:.85rem 2.2rem; border-radius:999px; font-weight:700; letter-spacing:.2px; box-shadow: 0 10px 30px rgba(243,156,18,0.16); border:none; cursor:pointer; transition: var(--transition); position:relative; overflow:hidden; }
        .cta-button:focus { outline: 3px solid rgba(243,156,18,0.18); }
        .cta-button:hover { transform: translateY(-6px) scale(1.01); box-shadow: 0 20px 40px rgba(243,156,18,0.2); }

        /* button ripple */
        .cta-button .ripple { position:absolute; border-radius:50%; transform:scale(0); animation: ripple 700ms ease-out; background: rgba(255,255,255,0.24); }
        @keyframes ripple { to { transform:scale(4); opacity:0; } }

        /* Section headers */
        .section-header { text-align:center; margin: 3.5rem 0; }
        .section-header h2 { font-size:2.4rem; color:var(--dark); margin-bottom:.5rem; }
        .section-header p { color:#5e6b80; max-width:700px; margin: 0 auto; }

        /* Product grid */
        .products-section { padding:2.5rem 5%; max-width:1200px; margin:0 auto; }
        .product-grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap:1.8rem; }

        .product-card {
            background: linear-gradient(180deg, #ffffff, #fbfdff);
            border-radius:14px; padding:0; overflow:hidden; box-shadow: var(--shadow); position:relative;
            transform: translateZ(0); transition: transform .45s cubic-bezier(.2,.9,.3,1), box-shadow .35s ease;
            will-change: transform;
        }
        .product-card.animate-tilt { perspective: 1000px; }
        .product-card:hover { transform: translateY(-18px) scale(1.01); box-shadow: 0 25px 50px rgba(32,48,99,0.12); }

        .product-image { height:200px; width:100%; object-fit:cover; display:block; border-bottom:1px solid #eef3ff; }
        .product-content { padding:1.4rem; }
        .product-title { font-size:1.2rem; margin-bottom:.6rem; color:var(--dark); }
        .product-description { color:#6d7788; font-size:.95rem; min-height:56px; margin-bottom:.8rem; }
        .product-price { font-size:1.4rem; font-weight:800; color:var(--primary); margin-bottom:1rem; }
        .product-badge { position:absolute; top:14px; right:14px; padding:.4rem .8rem; background:var(--accent); color:white; border-radius:999px; font-weight:700; font-size:.85rem; box-shadow: 0 6px 18px rgba(243,156,18,0.16); animation: badgePulse 2.4s infinite ease-in-out; }
        .discord-badge { background: var(--discord); box-shadow: 0 6px 18px rgba(88,101,242,0.12); }
        @keyframes badgePulse { 0%{ transform:scale(1); } 50%{ transform:scale(1.06);} 100%{ transform:scale(1);} }

        .product-actions { display:flex; gap:.6rem; margin-top:10px; }
        .buy-button { flex:1; background:var(--primary); color:white; border:none; padding:.7rem; border-radius:8px; font-weight:700; cursor:pointer; display:inline-flex; align-items:center; justify-content:center; gap:.6rem; transition:var(--transition); position:relative; overflow:hidden; }
        .buy-button:hover { transform: translateY(-3px); }
        .discord-button { background: var(--discord); }
        .details-button { background:white; border:1px solid #e6efff; color:var(--primary); font-weight:700; }

        /* Features grid */
        .features { padding:3.2rem 5%; background: linear-gradient(180deg, rgba(250,252,255,1), rgba(244,247,255,1)); }
        .features-container { display:grid; grid-template-columns: repeat(auto-fit, minmax(260px,1fr)); gap:1.6rem; max-width:1200px; margin:0 auto; }
        .feature-card { background:white; padding:1.6rem; border-radius:12px; box-shadow: var(--shadow); transition: transform .45s ease, box-shadow .35s ease; }
        .feature-card:hover { transform: translateY(-10px); }

        /* Testimonials */
        .testimonials { padding:2.6rem 5%; max-width:1200px; margin:0 auto; }

        /* Comments */
        .comments-section { padding:2.6rem 5%; max-width:1200px; margin:0 auto; }

        /* Modal */
        .modal { display:none; position:fixed; inset:0; background: rgba(4, 13, 30, 0.5); z-index:2000; align-items:center; justify-content:center; padding:2rem; }
        .modal.open { display:flex; }
        .modal-content { width:100%; max-width:560px; border-radius:12px; overflow:hidden; background: linear-gradient(180deg,#fff,#fbfdff); box-shadow: 0 30px 80px rgba(14,30,70,0.42); transform: translateY(20px) scale(.98); animation: modalIn .36s cubic-bezier(.12,.9,.2,1) forwards; }
        @keyframes modalIn { to { transform: translateY(0) scale(1); } }
        .modal-header { padding:1rem 1.2rem; display:flex; align-items:center; justify-content:space-between; background:linear-gradient(135deg,var(--primary),var(--secondary)); color:white; }
        .close-modal { background:none; border:none; color:white; font-size:1.6rem; cursor:pointer; }
        /* Animate on scroll utility */
        .animate-on-scroll { opacity:0; transform: translateY(18px); transition: opacity .7s ease, transform .7s cubic-bezier(.2,.9,.2,1); will-change: transform, opacity; }
        .in-view { opacity:1; transform: translateY(0); }

        /* Tilt transform applied dynamically */
        .tilt { transform-style: preserve-3d; }

        /* Small helpers */
        .hidden { display:none !important; }
        footer { background:var(--dark); color:white; padding:2.2rem 5%; margin-top:2.4rem; }

        /* Responsive */
        @media (max-width:768px) {
            .hero { min-height:46vh; padding:2.5rem 5%; }
            .hero h1 { font-size:1.9rem; }
            nav ul { display:none; }
        }

    </style>
</head>
<body>
    <header id="mainHeader">
        <div class="header-container">
            <div class="logo">
                <i class="fas fa-key"></i>
                <span>LicenciasPremium</span>
            </div>
            <nav>
                <ul>
                    <li><a href="#">Inicio</a></li>
                    <li><a href="#products">Productos</a></li>
                    <li><a href="#features">Beneficios</a></li>
                    <li><a href="#comments">Comentarios</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="hero">
        <div class="hero-content">
            <h1 class="animate-on-scroll">Licencias de Software Premium</h1>
            <p class="animate-on-scroll" style="transition-delay:.08s">Obtén las mejores licencias originales con entrega inmediata y soporte 24/7</p>
            <button class="cta-button" id="heroCta"><span>Ver Productos</span> <i class="fas fa-arrow-right"></i></button>
        </div>
    </section>

    <section id="products" class="products-section">
        <div class="section-header animate-on-scroll">
            <h2>Nuestras Licencias Destacadas</h2>
            <p>Licencias originales con garantía de activación y soporte técnico permanente</p>
        </div>
        <div class="product-grid">
            <!-- Cards: we keep the same product set, but add animation classes and lazy-loading images -->
            <div class="product-card animate-on-scroll animate-tilt" data-product="windows11">
                <div class="product-badge">MÁS VENDIDO</div>
                <img loading="lazy" src="win11pro.jpeg" alt="Windows 11 Pro" class="product-image">
                <div class="product-content">
                    <h3 class="product-title">Windows 11 Pro</h3>
                    <p class="product-description">Licencia digital permanente para 1 PC. Actualizaciones gratuitas y soporte oficial.</p>
                    <div class="product-price">16 EUR</div>
                    <div class="product-actions">
                        <button class="buy-button" data-product="windows11"><i class="fas fa-shopping-cart"></i> Comprar Ahora</button>
                        <button class="details-button" data-product="windows11"><i class="fas fa-info-circle"></i> Detalles</button>
                    </div>
                </div>
            </div>

            <div class="product-card animate-on-scroll animate-tilt" data-product="windows10">
                <img loading="lazy" src="win10pro.png" alt="Windows 10 Pro" class="product-image">
                <div class="product-content">
                    <h3 class="product-title">Windows 10 Pro</h3>
                    <p class="product-description">Licencia permanente para sistemas Windows 10. Compatible con todos los dispositivos.</p>
                    <div class="product-price">16 EUR</div>
                    <div class="product-actions">
                        <button class="buy-button" data-product="windows10"><i class="fas fa-shopping-cart"></i> Comprar Ahora</button>
                        <button class="details-button" data-product="windows10"><i class="fas fa-info-circle"></i> Detalles</button>
                    </div>
                </div>
            </div>

            <div class="product-card animate-on-scroll animate-tilt" data-product="spotify">
                <div class="product-badge">OFERTA</div>
                <img loading="lazy" src="spoti.png" alt="Spotify Premium" class="product-image">
                <div class="product-content">
                    <h3 class="product-title">Spotify Premium</h3>
                    <p class="product-description">Cuenta Premium válida por 1 año. Sin anuncios, descargas ilimitadas y máxima calidad.</p>
                    <div class="product-price">32 EUR</div>
                    <div class="product-actions">
                        <button class="buy-button" data-product="spotify"><i class="fas fa-shopping-cart"></i> Comprar Ahora</button>
                        <button class="details-button" data-product="spotify"><i class="fas fa-info-circle"></i> Detalles</button>
                    </div>
                </div>
            </div>

            <div class="product-card animate-on-scroll animate-tilt" data-product="office365">
                <img loading="lazy" src="365.jpeg" alt="Microsoft 365" class="product-image">
                <div class="product-content">
                    <h3 class="product-title">Microsoft 365</h3>
                    <p class="product-description">Suscripción anual que incluye Word, Excel, PowerPoint, Outlook y 1TB de almacenamiento.</p>
                    <div class="product-price">16 EUR</div>
                    <div class="product-actions">
                        <button class="buy-button" data-product="office365"><i class="fas fa-shopping-cart"></i> Comprar Ahora</button>
                        <button class="details-button" data-product="office365"><i class="fas fa-info-circle"></i> Detalles</button>
                    </div>
                </div>
            </div>

            <div class="product-card animate-on-scroll animate-tilt" data-product="discord">
                <div class="product-badge discord-badge">NUEVO</div>
                <img loading="lazy" src="nitro.jpeg" alt="Discord Nitro Basic" class="product-image">
                <div class="product-content">
                    <h3 class="product-title">Discord Nitro Basic</h3>
                    <p class="product-description">Mejora tu experiencia de Discord con emojis animados, avatar animado y más.</p>
                    <div class="product-price" style="color:var(--discord)">20 EUR</div>
                    <div class="product-actions">
                        <button class="buy-button discord-button" data-product="discord"><i class="fas fa-shopping-cart"></i> Comprar Ahora</button>
                        <button class="details-button" data-product="discord"><i class="fas fa-info-circle"></i> Detalles</button>
                    </div>
                </div>
            </div>

        </div>
    </section>

    <section id="features" class="features animate-on-scroll">
        <div class="section-header">
            <h2>¿Por Qué Elegirnos?</h2>
            <p>Ofrecemos la mejor experiencia de compra de licencias digitales</p>
        </div>
        <div class="features-container">
            <div class="feature-card animate-on-scroll">
                <div class="feature-icon"><i class="fas fa-bolt"></i></div>
                <h3 class="feature-title">Entrega Inmediata</h3>
                <p class="feature-description">Recibe tu licencia por email en menos de 5 minutos tras la compra confirmada.</p>
            </div>
            <div class="feature-card animate-on-scroll">
                <div class="feature-icon"><i class="fas fa-shield-alt"></i></div>
                <h3 class="feature-title">Garantía 100%</h3>
                <p class="feature-description">Todas nuestras licencias son originales con garantía de activación.</p>
            </div>
            <div class="feature-card animate-on-scroll">
                <div class="feature-icon"><i class="fas fa-headset"></i></div>
                <h3 class="feature-title">Soporte 24/7</h3>
                <p class="feature-description">Equipo de soporte disponible en cualquier momento para resolver tus dudas.</p>
            </div>
        </div>
    </section>

    <section id="comments" class="comments-section">
        <div class="section-header">
            <h2>Comentarios de Clientes</h2>
            <p>Comparte tu experiencia con otros usuarios</p>
        </div>
        
        <div class="comments-container">
            <div class="comment-form">
                <h3>Deja tu comentario</h3>
                <div class="form-group">
                    <label for="comment-name">Tu nombre:</label>
                    <input type="text" id="comment-name" placeholder="Nombre (opcional)">
                </div>
                <div class="form-group">
                    <label for="comment-text">Tu comentario:</label>
                    <textarea id="comment-text" placeholder="Escribe tu experiencia con nuestros productos..."></textarea>
                </div>
                <div class="form-group">
                    <label>Calificación:</label>
                    <div class="comment-rating" id="comment-rating">
                        <i class="fas fa-star" data-value="1"></i>
                        <i class="fas fa-star" data-value="2"></i>
                        <i class="fas fa-star" data-value="3"></i>
                        <i class="fas fa-star" data-value="4"></i>
                        <i class="fas fa-star" data-value="5"></i>
                    </div>
                </div>
                <button id="comment-submit" class="comment-submit">Publicar Comentario</button>
            </div>
            
            <div class="comments-list" id="comments-list">
                <!-- Los comentarios se cargarán dinámicamente aquí -->
                <div class="no-comments">Sé el primero en dejar un comentario...</div>
            </div>
        </div>
    </section>

    <div class="modal" id="productModal" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Windows 11 Pro</h2>
                <button class="close-modal" aria-label="Cerrar modal">&times;</button>
            </div>
            <div class="modal-body" style="padding:1.2rem">
                <img id="modalImage" src="win11pro.jpeg" alt="Producto" class="modal-product-image" style="width:100%; max-height:220px; object-fit:contain; margin-bottom:1rem;">
                <div class="modal-price" id="modalPrice">16 EUR</div>
                <div class="modal-description" id="modalDescription"><p>Licencia digital permanente para 1 PC. Actualizaciones gratuitas y soporte oficial.</p></div>
                <div class="modal-features" id="modalFeatures"><h3>Características principales:</h3><ul></ul></div>
                <div id="paypal-button-container"></div>
            </div>
        </div>
    </div>
    <footer>
        <div class="footer-container">
            <div class="footer-column">
                <h3>LicenciasPremium</h3>
                <p>Tu tienda confiable de licencias de software originales con entrega inmediata y soporte profesional.</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
            
            <div class="footer-column">
                <h3>Enlaces Rápidos</h3>
                <ul class="footer-links">
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Inicio</a></li>
                    <li><a href="#products"><i class="fas fa-chevron-right"></i> Productos</a></li>
                    <li><a href="#features"><i class="fas fa-chevron-right"></i> Beneficios</a></li>
                    <li><a href="#comments"><i class="fas fa-chevron-right"></i> Comentarios</a></li>
                </ul>
            </div>
            
            <div class="footer-column">
                <h3>Productos</h3>
                <ul class="footer-links">
                    <li><a href="#" class="product-link" data-product="windows11"><i class="fas fa-chevron-right"></i> Windows 11 Pro</a></li>
                    <li><a href="#" class="product-link" data-product="windows10"><i class="fas fa-chevron-right"></i> Windows 10 Pro</a></li>
                    <li><a href="#" class="product-link" data-product="spotify"><i class="fas fa-chevron-right"></i> Spotify Premium</a></li>
                    <li><a href="#" class="product-link" data-product="office365"><i class="fas fa-chevron-right"></i> Microsoft 365</a></li>
                    <li><a href="#" class="product-link" data-product="discord"><i class="fas fa-chevron-right"></i> Discord Nitro Basic</a></li>
                </ul>
            </div>
            
            <div class="footer-column">
                <h3>Contacto</h3>
                <div class="contact-info">
                    <p><i class="fas fa-envelope"></i> licenciaspremium3@gmail.com</p>
                    <p><i class="fas fa-map-marker-alt"></i> Madrid, España</p>
                </div>
            </div>
        </div>
        
        <div class="copyright">
            <p>&copy; 2023 LicenciasPremium. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script>
        // --- Productos base (igual que antes) ---
        const products = {
            windows11: { title: "Windows 11 Pro", price: "16", image: "win11pro.jpeg", description: "Licencia digital permanente para 1 PC. Actualizaciones gratuitas y soporte oficial.", features: ["Activación inmediata después del pago","Soporte técnico 24/7","Garantía de activación permanente","Entrega por email en menos de 5 minutos","Compatible con todas las versiones de Windows"] },
            windows10: { title: "Windows 10 Pro", price: "16", image: "win10pro.png", description: "Licencia permanente para sistemas Windows 10. Compatible con todos los dispositivos.", features: ["Activación instantánea","Soporte técnico incluido","Licencia permanente sin renovaciones","Entrega digital inmediata","Compatible con PC y laptops"] },
            spotify: { title: "Spotify Premium", price: "32", image: "spoti.png", description: "Cuenta Premium válida por 1 año. Sin anuncios, descargas ilimitadas y máxima calidad.", features: ["1 año de suscripción Premium","Sin interrupciones por anuncios","Descarga ilimitada de música","Calidad de audio mejorada","Acceso a millones de canciones"] },
            office365: { title: "Microsoft 365", price: "16", image: "365.jpeg", description: "Suscripción anual que incluye Word, Excel, PowerPoint, Outlook y 1TB de almacenamiento.", features: ["Suscripción de 1 año completa","Acceso a todas las aplicaciones de Office","1 TB de almacenamiento en OneDrive","Actualizaciones gratuitas durante el año","Soporte técnico prioritario"] },
            discord: { title: "Discord Nitro Basic", price: "20", image: "discord-nitro.jpg", description: "Mejora tu experiencia de Discord con emojis animados, avatar animado y más.", features: ["Emojis animados en cualquier servidor","Avatar animado","Fondo de perfil personalizado","Soporte para subir archivos de hasta 50MB","Etiqueta personalizada"] }
        };

        // DOM Elements
        const modal = document.getElementById('productModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalPrice = document.getElementById('modalPrice');
        const modalImage = document.getElementById('modalImage');
        const modalDescription = document.getElementById('modalDescription');
        const modalFeatures = document.getElementById('modalFeatures');
        const closeModalBtn = document.querySelector('.close-modal');
        const paypalContainer = document.getElementById('paypal-button-container');

        // Comment elements
        const commentSubmitBtn = document.getElementById('comment-submit');
        const commentText = document.getElementById('comment-text');
        const commentName = document.getElementById('comment-name');
        const commentsList = document.getElementById('comments-list');
        const ratingStars = document.querySelectorAll('#comment-rating .fa-star');
        let currentRating = 0;

        // IntersectionObserver for animate-on-scroll
        const io = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('in-view');
                    // small stagger for children
                    Array.from(entry.target.querySelectorAll('.animate-on-scroll')).forEach((el, idx) => {
                        el.style.transitionDelay = (idx * 80) + 'ms';
                        el.classList.add('in-view');
                    });
                }
            });
        }, { threshold: 0.12 });

        document.addEventListener('DOMContentLoaded', function() {
            // Attach IO to elements
            document.querySelectorAll('.animate-on-scroll').forEach(el => io.observe(el));

            // Product buttons
            document.querySelectorAll('.buy-button').forEach(button => button.addEventListener('click', (e) => {
                const productId = button.getAttribute('data-product'); openModal(productId);
                // small click ripple
                createRipple(button, e);
            }));
            document.querySelectorAll('.details-button').forEach(button => button.addEventListener('click', (e) => {
                const productId = button.getAttribute('data-product'); openModal(productId);
            }));

            // Footer product links
            document.querySelectorAll('.product-link').forEach(link => link.addEventListener('click', function(e){ e.preventDefault(); openModal(this.dataset.product); }));

            // CTA
            document.getElementById('heroCta').addEventListener('click', function(e){ e.preventDefault(); document.querySelector('#products').scrollIntoView({behavior:'smooth'}); createRipple(this, e); });

            // Modal close events
            closeModalBtn.addEventListener('click', closeModal);
            window.addEventListener('click', (ev) => { if (ev.target === modal) closeModal(); });
            document.addEventListener('keydown', (ev) => { if (ev.key === 'Escape' && modal.classList.contains('open')) closeModal(); });

            // Comment system
            commentSubmitBtn.addEventListener('click', submitComment);
            ratingStars.forEach(star => star.addEventListener('click', handleRating));
            renderComments();

            // Add tilt effect for product cards
            document.querySelectorAll('.animate-tilt').forEach(card => {
                card.addEventListener('mousemove', handleTilt);
                card.addEventListener('mouseleave', resetTilt);
            });

            // Header shrink on scroll
            const header = document.getElementById('mainHeader');
            let lastScroll = 0;
            window.addEventListener('scroll', () => {
                const sc = window.scrollY;
                if (sc > 60) header.classList.add('shrink'); else header.classList.remove('shrink');
                lastScroll = sc;
            });

            // Apply small initial animations
            setTimeout(()=> document.querySelectorAll('.hero-content .animate-on-scroll').forEach(el => el.classList.add('in-view')), 120);
        });

        // Tilt helpers
        function handleTilt(e) {
            const card = e.currentTarget;
            const rect = card.getBoundingClientRect();
            const x = e.clientX - rect.left; // x position within the element.
            const y = e.clientY - rect.top;  // y position within the element.
            const cx = rect.width/2; const cy = rect.height/2;
            const dx = (x - cx) / cx; const dy = (y - cy) / cy;
            const rx = (dy * 6).toFixed(2); const ry = (dx * -8).toFixed(2);
            card.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg) translateZ(0)`;
        }
        function resetTilt(e) { e.currentTarget.style.transform = ''; }

        // Modal open/close and paypal
        function openModal(productId) {
            const product = products[productId];
            modalTitle.textContent = product.title;
            modalPrice.textContent = `${product.price} EUR`;
            modalImage.src = product.image;
            modalDescription.innerHTML = `<p>${product.description}</p>`;
            const ul = modalFeatures.querySelector('ul'); ul.innerHTML = '';
            product.features.forEach(f => { const li = document.createElement('li'); li.textContent = f; ul.appendChild(li); });

            // Paypal
            paypalContainer.innerHTML = '';
            paypal.Buttons({
                style: { layout: 'vertical', color: 'blue', shape: 'rect', label: 'pay', height: 45 },
                createOrder(data, actions) { return actions.order.create({ purchase_units: [{ description: product.title, amount: { value: product.price } }] }); },
                onApprove(data, actions) { return actions.order.capture().then(details => { alert(`✅ Pago completado! Tu licencia de ${product.title} será enviada a: ${details.payer.email_address}`); closeModal(); }); },
                onError(err) { console.error(err); alert('❌ Error durante el pago.'); }
            }).render('#paypal-button-container');

            modal.classList.add('open'); modal.setAttribute('aria-hidden','false'); document.body.style.overflow = 'hidden';
        }
        function closeModal() { modal.classList.remove('open'); modal.setAttribute('aria-hidden','true'); paypalContainer.innerHTML = ''; document.body.style.overflow = ''; }

        // Ripple effect for buttons
        function createRipple(button, event) {
            const rect = button.getBoundingClientRect();
            const ripple = document.createElement('span'); ripple.className = 'ripple';
            const size = Math.max(rect.width, rect.height); ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = (event.clientX - rect.left - size/2) + 'px'; ripple.style.top = (event.clientY - rect.top - size/2) + 'px';
            button.appendChild(ripple);
            setTimeout(()=> ripple.remove(), 700);
        }

        // Comments (localStorage)
        function submitComment() {
            const content = commentText.value.trim(); if (!content) { alert('Por favor escribe un comentario'); return; }
            const name = commentName.value.trim() || 'Anónimo'; const avatar = name.charAt(0).toUpperCase();
            const comment = { author:name, avatar, date: getFormattedDate(), content, rating: currentRating };
            saveComment(comment); renderComments(); commentText.value=''; commentName.value=''; resetRating(); alert('¡Comentario publicado con éxito!');
        }
        function saveComment(comment) { let comments = JSON.parse(localStorage.getItem('productComments')) || []; comments.unshift(comment); localStorage.setItem('productComments', JSON.stringify(comments)); }
        function loadComments() { return JSON.parse(localStorage.getItem('productComments')) || []; }
        function renderComments() {
            const comments = loadComments(); commentsList.innerHTML = '';
            if (comments.length === 0) { commentsList.innerHTML = '<div class="no-comments">Sé el primero en dejar un comentario...</div>'; return; }
            comments.forEach(comment => {
                const card = document.createElement('div'); card.className='comment-card animate-on-scroll in-view';
                let ratingHTML = '';
                if (comment.rating > 0) { ratingHTML = '<div class="comment-rating">'; for (let i=1;i<=5;i++) ratingHTML += `<i class="fas fa-star ${i<=comment.rating? 'active':''}"></i>`; ratingHTML += '</div>'; }
                card.innerHTML = `
                    <div class="comment-header"><div class="comment-avatar">${comment.avatar}</div><div><div class="comment-author">${comment.author}</div><div class="comment-date">${comment.date}</div></div></div>
                    <div class="comment-content">${comment.content}</div>
                    ${ratingHTML}
                `;
                commentsList.appendChild(card);
            });
        }
        function getFormattedDate() {
            const now = new Date(); const months = ['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'];
            return `${now.getDate()} de ${months[now.getMonth()]}, ${now.getFullYear()}`;
        }
        function handleRating(e) { const value = parseInt(e.target.dataset.value); currentRating = value; ratingStars.forEach((s, idx)=> s.classList.toggle('active', idx < value)); }
        function resetRating() { currentRating = 0; ratingStars.forEach(s => s.classList.remove('active')); }

    </script>
</body>
</html>
